@{
    ViewData["Title"] = "–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var user = ViewBag.User as InsuranceAgency.Domain.Entities.User;
    var role = ViewBag.Role as string;
}

<div class="row mb-4">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <h1 class="mb-2">üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, @user?.Username!</h1>
                <p class="lead mb-0">
                    –í–∞—à–∞ —Ä–æ–ª—å: 
                    @if (role == "Administrator")
                    {
                        <span class="badge bg-danger">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</span>
                    }
                    else if (role == "Agent")
                    {
                        <span class="badge bg-info">–ê–≥–µ–Ω—Ç</span>
                    }
                    else if (role == "Client")
                    {
                        <span class="badge bg-success">–ö–ª–∏–µ–Ω—Ç</span>
                    }
                </p>
            </div>
            <div>
                <a href="@Url.Action("Index", "Home")" class="btn btn-outline-secondary">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    @if (role == "Administrator" || role == "Agent")
    {
        <div class="col-md-3 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">üìã –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤</h5>
                    <p class="card-text flex-grow-1">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –∫–ª–∏–µ–Ω—Ç–æ–≤: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, –ø—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π</p>
                    <a href="@Url.Action("Clients", "Agent")" class="btn btn-primary mt-auto">–ü–µ—Ä–µ–π—Ç–∏ ‚Üí</a>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">üìÑ –î–æ–≥–æ–≤–æ—Ä—ã</h5>
                    <p class="card-text flex-grow-1">–°–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–≥–æ–≤–æ—Ä–∞–º–∏ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è. –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –¥–æ–≥–æ–≤–æ—Ä–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π</p>
                    <a href="@Url.Action("Contracts", "Agent")" class="btn btn-primary mt-auto">–ü–µ—Ä–µ–π—Ç–∏ ‚Üí</a>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">üìù –ó–∞—è–≤–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤</h5>
                    <p class="card-text flex-grow-1">–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞—è–≤–æ–∫ –Ω–∞ –¥–æ–≥–æ–≤–æ—Ä—ã —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è. –û–¥–æ–±—Ä–µ–Ω–∏–µ –∏–ª–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤</p>
                    <a href="@Url.Action("Applications", "Agent")" class="btn btn-primary mt-auto">–ü–µ—Ä–µ–π—Ç–∏ ‚Üí</a>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">üîç –ü–æ–∏—Å–∫ –¥–æ–≥–æ–≤–æ—Ä–æ–≤</h5>
                    <p class="card-text flex-grow-1">–ü–æ–∏—Å–∫ –¥–æ–≥–æ–≤–æ—Ä–æ–≤ –ø–æ –Ω–æ–º–µ—Ä—É, –∫–ª–∏–µ–Ω—Ç—É, —Å—Ç–∞—Ç—É—Å—É –∏ –¥—Ä—É–≥–∏–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º</p>
                    <a href="@Url.Action("SearchContracts", "Agent")" class="btn btn-primary mt-auto">–ü–µ—Ä–µ–π—Ç–∏ ‚Üí</a>
                </div>
            </div>
        </div>
    }

    @if (role == "Client")
    {
        <div class="col-md-3 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h5>
                    <p class="card-text flex-grow-1">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–∏—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏: —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ email –∏ –¥—Ä—É–≥–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏</p>
                    <a href="@Url.Action("Profile", "Client")" class="btn btn-primary mt-auto">–ü–µ—Ä–µ–π—Ç–∏ ‚Üí</a>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">üí≥ –û–ø–ª–∞—Ç–∞ –¥–æ–≥–æ–≤–æ—Ä–∞</h5>
                    <p class="card-text flex-grow-1">–ë—ã—Å—Ç—Ä–∞—è –æ–ø–ª–∞—Ç–∞ –Ω–µ–æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö –¥–æ–≥–æ–≤–æ—Ä–æ–≤. –í—ã–±–µ—Ä–∏—Ç–µ –¥–æ–≥–æ–≤–æ—Ä –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –∏ –æ–ø–ª–∞—Ç–∏—Ç–µ –µ–≥–æ</p>
                    <a href="@Url.Action("History", "Client")" class="btn btn-primary mt-auto">–ü–µ—Ä–µ–π—Ç–∏ ‚Üí</a>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">üìä –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h5>
                    <p class="card-text flex-grow-1">–ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–ª–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏ –≤—Å–µ—Ö –≤–∞—à–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π: –¥–æ–≥–æ–≤–æ—Ä—ã, –ø–ª–∞—Ç–µ–∂–∏, –∑–∞—è–≤–∫–∏ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π</p>
                    <a href="@Url.Action("History", "Client")" class="btn btn-primary mt-auto">–ü–µ—Ä–µ–π—Ç–∏ ‚Üí</a>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">üìù –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É</h5>
                    <p class="card-text flex-grow-1">–ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ö–æ–≤–æ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–∞. –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ –∑–∞—è–≤–æ–∫</p>
                    <a href="@Url.Action("CreateApplication", "Client")" class="btn btn-primary mt-auto">–ü–µ—Ä–µ–π—Ç–∏ ‚Üí</a>
                </div>
            </div>
        </div>
    }

    @if (role == "Administrator")
    {
        <div class="col-md-3 mb-4">
            <div class="card h-100 shadow-sm border-danger">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title text-danger">‚öôÔ∏è –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —É—Å–ª—É–≥</h5>
                    <p class="card-text flex-grow-1">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å–ª—É–≥–∞–º–∏ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ö–æ–≤—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤</p>
                    <a href="@Url.Action("Services", "Admin")" class="btn btn-danger mt-auto">–ü–µ—Ä–µ–π—Ç–∏ ‚Üí</a>
                </div>
            </div>
        </div>
    }
</div>

@if (role == "Administrator" || role == "Agent")
{
    <div class="row mt-5">
        <div class="col-12">
            <h3 class="mb-4">üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h3>
            <div class="row g-3">
                <div class="col-md-3">
                    <div class="card text-center shadow-sm border-primary">
                        <div class="card-body">
                            <div class="mb-2" style="font-size: 2rem;">üìÑ</div>
                            <h2 class="text-primary mb-1">@(ViewBag.TotalContracts ?? 0)</h2>
                            <p class="text-muted mb-0">–í—Å–µ–≥–æ –¥–æ–≥–æ–≤–æ—Ä–æ–≤</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center shadow-sm border-info">
                        <div class="card-body">
                            <div class="mb-2" style="font-size: 2rem;">üë•</div>
                            <h2 class="text-info mb-1">@(ViewBag.TotalClients ?? 0)</h2>
                            <p class="text-muted mb-0">–í—Å–µ–≥–æ –∫–ª–∏–µ–Ω—Ç–æ–≤</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center shadow-sm border-success">
                        <div class="card-body">
                            <div class="mb-2" style="font-size: 2rem;">‚úÖ</div>
                            <h2 class="text-success mb-1">@(ViewBag.ActiveContracts ?? 0)</h2>
                            <p class="text-muted mb-0">–ê–∫—Ç–∏–≤–Ω—ã—Ö –¥–æ–≥–æ–≤–æ—Ä–æ–≤</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card text-center shadow-sm border-warning">
                        <div class="card-body">
                            <div class="mb-2" style="font-size: 2rem;">üí≥</div>
                            <h2 class="text-warning mb-1">@(ViewBag.TotalPayments ?? 0)</h2>
                            <p class="text-muted mb-0">–í—Å–µ–≥–æ –ø–ª–∞—Ç–µ–∂–µ–π</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}

