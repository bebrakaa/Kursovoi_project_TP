@model IEnumerable<InsuranceAgency.Domain.Entities.Client>
@{
    ViewData["Title"] = "–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h2>üìã –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤</h2>
        <p class="text-muted mb-0">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –∫–ª–∏–µ–Ω—Ç–æ–≤: –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</p>
    </div>
    <div>
        <a href="@Url.Action("Index", "Dashboard")" class="btn btn-outline-secondary me-2">‚Üê –ù–∞–∑–∞–¥ –≤ –∫–∞–±–∏–Ω–µ—Ç</a>
        <a href="@Url.Action("Index", "Home")" class="btn btn-outline-primary">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
    <div>
        <a href="@Url.Action("AddClient", "Agent")" class="btn btn-success me-2">
            <span>‚ûï</span> –î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞
        </a>
        <a href="@Url.Action("CreateContract", "Agent")" class="btn btn-primary">
            <span>üìÑ</span> –°–æ–∑–¥–∞—Ç—å –¥–æ–≥–æ–≤–æ—Ä
        </a>
    </div>
</div>

<div class="mb-3">
    <form method="get" class="d-flex">
        <input type="text" name="search" class="form-control me-2" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏, email –∏–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω—É..." value="@ViewBag.Search" />
        <button type="submit" class="btn btn-outline-primary">–ü–æ–∏—Å–∫</button>
    </form>
</div>

@if (Model != null && Model.Any())
{
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th>–§–ò–û –∫–ª–∏–µ–Ω—Ç–∞</th>
                    <th>Email</th>
                    <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                    <th>–ü–∞—Å–ø–æ—Ä—Ç</th>
                    <th class="text-center">–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var client in Model)
                {
                    <tr>
                        <td><strong>@client.FullName</strong></td>
                        <td>@client.Email</td>
                        <td>@(string.IsNullOrWhiteSpace(client.Phone) ? "<span class='text-muted'>–ù–µ —É–∫–∞–∑–∞–Ω</span>" : client.Phone)</td>
                        <td>@(string.IsNullOrWhiteSpace(client.Passport) ? "<span class='text-muted'>–ù–µ —É–∫–∞–∑–∞–Ω</span>" : client.Passport)</td>
                        <td class="text-center">
                            <a href="@Url.Action("ClientHistory", "Agent", new { clientId = client.Id })" class="btn btn-sm btn-info me-1" title="–ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π">
                                üìä –ò—Å—Ç–æ—Ä–∏—è
                            </a>
                            <a href="@Url.Action("VerifyDocuments", "Agent", new { clientId = client.Id })" class="btn btn-sm btn-primary me-1" title="–í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –∫–ª–∏–µ–Ω—Ç–∞">
                                ‚úÖ –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å
                            </a>
                            <a href="@Url.Action("EditClient", "Agent", new { id = client.Id })" class="btn btn-sm btn-warning me-1" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞">
                                ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                            </a>
                            <form method="post" asp-action="DeleteClient" asp-controller="Agent" asp-route-id="@client.Id" asp-antiforgery="true" class="d-inline" onsubmit="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.');">
                                <button type="submit" class="btn btn-sm btn-danger" title="–£–¥–∞–ª–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞">
                                    üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                                </button>
                            </form>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
}
else
{
    <div class="alert alert-info">
        <h5>üìã –°–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø—É—Å—Ç</h5>
        <p class="mb-0">–ù–∞—á–Ω–∏—Ç–µ —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–î–æ–±–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞" –≤—ã—à–µ.</p>
    </div>
}

