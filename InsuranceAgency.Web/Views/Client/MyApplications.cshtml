@model IEnumerable<InsuranceAgency.Domain.Entities.ContractApplication>
@{
    ViewData["Title"] = "–ú–æ–∏ –∑–∞—è–≤–∫–∏ –Ω–∞ –¥–æ–≥–æ–≤–æ—Ä—ã";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h2>üìù –ú–æ–∏ –∑–∞—è–≤–∫–∏ –Ω–∞ –¥–æ–≥–æ–≤–æ—Ä—ã</h2>
        <p class="text-muted mb-0">–ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –≤–∞—à–∏—Ö –∑–∞—è–≤–æ–∫ –Ω–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ö–æ–≤—ã—Ö –¥–æ–≥–æ–≤–æ—Ä–æ–≤ –∏ –∏—Ö —Å—Ç–∞—Ç—É—Å–æ–≤</p>
    </div>
    <div>
        <a href="@Url.Action("Index", "Dashboard")" class="btn btn-outline-secondary me-2">‚Üê –ù–∞–∑–∞–¥ –≤ –∫–∞–±–∏–Ω–µ—Ç</a>
        <a href="@Url.Action("CreateApplication", "Client")" class="btn btn-primary">
            <span>‚ûï</span> –°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É
        </a>
    </div>
</div>

@if (Model != null && Model.Any())
{
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th>–£—Å–ª—É–≥–∞ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è</th>
                    <th>–ü–µ—Ä–∏–æ–¥ –¥–µ–π—Å—Ç–≤–∏—è</th>
                    <th>–ñ–µ–ª–∞–µ–º–∞—è –ø—Ä–µ–º–∏—è</th>
                    <th>–°—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏</th>
                    <th>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var application in Model)
                {
                    <tr>
                        <td><strong>@(application.Service?.Name ?? "<span class='text-muted'>–£—Å–ª—É–≥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</span>")</strong></td>
                        <td>@application.DesiredStartDate.ToString("dd.MM.yyyy") - @application.DesiredEndDate.ToString("dd.MM.yyyy")</td>
                        <td><span class="badge bg-info">@application.DesiredPremium.ToString("N2") RUB</span></td>
                        <td>
                            @if (application.Status == InsuranceAgency.Domain.Enums.ApplicationStatus.Approved)
                            {
                                <span class="badge bg-success">‚úÖ –û–¥–æ–±—Ä–µ–Ω–∞</span>
                            }
                            else if (application.Status == InsuranceAgency.Domain.Enums.ApplicationStatus.Rejected)
                            {
                                <span class="badge bg-danger">‚ùå –û—Ç–∫–ª–æ–Ω–µ–Ω–∞</span>
                            }
                            else if (application.Status == InsuranceAgency.Domain.Enums.ApplicationStatus.Processed)
                            {
                                <span class="badge bg-primary">‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–∞</span>
                            }
                            else
                            {
                                <span class="badge bg-warning">‚è≥ –û–∂–∏–¥–∞–µ—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è</span>
                            }
                        </td>
                        <td>@application.CreatedAt.ToString("dd.MM.yyyy HH:mm")</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
}
else
{
    <div class="alert alert-info">
        <h5>üìã –ó–∞—è–≤–æ–∫ –ø–æ–∫–∞ –Ω–µ—Ç</h5>
        <p class="mb-3">–í—ã –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–≤–∞–ª–∏ –∑–∞—è–≤–æ–∫ –Ω–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞—Ö–æ–≤—ã—Ö –¥–æ–≥–æ–≤–æ—Ä–æ–≤.</p>
        <a href="@Url.Action("CreateApplication", "Client")" class="btn btn-primary">–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é –∑–∞—è–≤–∫—É</a>
    </div>
}

